#!/bin/sh

indent() {
  sed -u 's/^/       /'
}

echo "-----> allocating 100Gb of memory total"
for i in {1..10}
do
  echo "-----> allocating 10Gb of memory"
  dd if=/dev/zero of=/dev/null bs=1G count=10
  echo "sleeping for 5 seconds" | indent
  sleep 5
done

echo "-----> Memory consumption complete!"
echo "Something should have broken by now." | indent
